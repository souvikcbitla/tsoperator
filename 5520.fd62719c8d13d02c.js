"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5520],{5520:(Y,u,r)=>{r.r(u),r.d(u,{PendingPageModule:()=>L});var d=r(4755),m=r(5030),a=r(9740),P=r(4053),l=r(5861),h=r(5439),O=r(4117),n=r(3020),x=r(2472),v=r(6579),A=r(3482),C=r(970);function Z(o,c){if(1&o){const e=n.EpF();n.TgZ(0,"ion-row")(1,"ion-col",6)(2,"ion-card",7)(3,"ion-row",8)(4,"ion-col",6)(5,"ion-row")(6,"ion-col",9)(7,"ion-text")(8,"h6"),n._uU(9),n.ALo(10,"uppercase"),n.qZA()()(),n.TgZ(11,"ion-col",10)(12,"ion-badge",11)(13,"ion-text")(14,"p")(15,"b"),n._uU(16,"Location: "),n.qZA(),n._uU(17),n.qZA()()()()(),n.TgZ(18,"ion-row")(19,"ion-col",9)(20,"ion-text")(21,"p")(22,"b"),n._uU(23,"PO ID: "),n.qZA(),n._uU(24),n.qZA()()(),n.TgZ(25,"ion-col",10)(26,"ion-text",12)(27,"p")(28,"b"),n._uU(29,"Vendor Name: "),n.qZA(),n._uU(30),n.qZA()()()(),n.TgZ(31,"ion-row")(32,"ion-col",9)(33,"ion-text",13)(34,"p")(35,"b"),n._uU(36,"Part Name: "),n.qZA(),n._uU(37),n.qZA()()(),n.TgZ(38,"ion-col",10)(39,"ion-text")(40,"p")(41,"b"),n._uU(42,"Order QTY: "),n.qZA(),n._uU(43),n.qZA()()()(),n.TgZ(44,"ion-row")(45,"ion-col",14)(46,"ion-badge",11)(47,"ion-text")(48,"p"),n._uU(49,"Total Amount: "),n.TgZ(50,"b"),n._uU(51),n.qZA()()()()(),n.TgZ(52,"ion-col",10)(53,"ion-button",15),n.NdJ("click",function(){const s=n.CHM(e).$implicit,g=n.oxw(2);return n.KtG(g.openOrderDetail(s.items))}),n._uU(54,"view"),n.qZA()()(),n.TgZ(55,"ion-row")(56,"ion-col",9)(57,"ion-text")(58,"p")(59,"b"),n._uU(60,"PO Created by: "),n.qZA(),n._uU(61),n.qZA()()(),n.TgZ(62,"ion-col",10)(63,"ion-button",16),n.NdJ("click",function(){const s=n.CHM(e).$implicit,g=n.oxw(2);return n.KtG(g.performAction(s,"APPROVE"))}),n._uU(64,"Approve"),n.qZA(),n.TgZ(65,"ion-button",17),n.NdJ("click",function(){const s=n.CHM(e).$implicit,g=n.oxw(2);return n.KtG(g.performAction(s,"REJECT"))}),n._uU(66,"Reject"),n.qZA()()()()()()()()}if(2&o){const e=c.$implicit,t=n.oxw(2);n.xp6(9),n.Oqu(n.lcZ(10,9,t.getTimeFormat(e.CREATED_TIME))),n.xp6(8),n.Oqu(e.LOCATION),n.xp6(7),n.Oqu(e.PO_ID),n.xp6(6),n.Oqu(e.VENDOR_NAME),n.xp6(7),n.hij(" ",e.items[0].part_name," "),n.xp6(6),n.AsE("",e.items[0].order_quantity," ",e.items.length>1?"more":"",""),n.xp6(8),n.Oqu(e.GRAND_TOTAL),n.xp6(10),n.hij(" ",e.CREATED_BY,"")}}function M(o,c){1&o&&(n.TgZ(0,"ion-row",18)(1,"ion-text"),n._uU(2,"No Pending Purchase Order found!"),n.qZA()())}function T(o,c){if(1&o&&(n.TgZ(0,"ion-grid"),n.YNc(1,Z,67,11,"ion-row",4),n.YNc(2,M,3,0,"ion-row",5),n.qZA()),2&o){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.pendingPOList),n.xp6(1),n.Q6J("ngIf",e.pendingPOList&&!e.pendingPOList.length)}}function w(o,c){1&o&&(n.TgZ(0,"ion-grid",19),n._UZ(1,"ion-spinner",20),n.qZA())}const b=[{path:"pending",component:(()=>{class o{constructor(e,t,i,s){this._authService=e,this._poService=t,this.modalCtrl=i,this.alertController=s,this.pendingPOList=[],this.isLoading=!1,this.pageTitle="Pending Purchase Order(s)"}ngOnInit(){this.getPendingPOs()}getPendingPOs(){this.isLoading=!0,this._poService.getPendingPOs().then(e=>{console.log("pendingPO : ",e),this.isLoading=!1,e.info&&(this.pendingPOList=e.info),console.log("this.pendingPOList : ",this.pendingPOList)},e=>{this.isLoading=!1,console.log("error while getting pending POs :: ",e)})}getTimeFormat(e){return h(e).format("DD-MMM-YYYY")}performAction(e,t){var i=this;return(0,l.Z)(function*(){let s,g;var N;"APPROVE"===t?(s="Approve Purchase Order",g="Are you sure you want to approve order?"):(s="Reject Purchase Order",g="Are you sure you want to reject order?"),yield(yield i.alertController.create({header:"Alert!",subHeader:s,message:g,buttons:[{text:"No"},{text:"Yes",handler:(N=(0,l.Z)(function*(I){let _=yield i._authService.getUserData(),f={application_id:JSON.parse(_.value||"").info.APPLICATION_ID,status:t,po_id:e.ID};console.log("payload : ",f),i._poService.POAction(f).subscribe(p=>{i.isLoading=!1,i.getPendingPOs(),i._authService.showToastMessage(`Purchase Order ${"APPROVE"===t?"Approved":"Rejected"} successfully.`,2e3,"success"),console.log("POAction response : ",p)},p=>{i.isLoading=!1,i._authService.showToastMessage("Something went wrong!",2e3,"danger"),console.log("POAction error : ",p)})}),function(_){return N.apply(this,arguments)})}]})).present()})()}openOrderDetail(e){var t=this;return(0,l.Z)(function*(){const i=yield t.modalCtrl.create({component:O.N,showBackdrop:!1,mode:"ios",initialBreakpoint:1,breakpoints:[0],componentProps:{title:"Purchase Order parts",orderPartsList:e}});i.present(),i.onWillDismiss().then(s=>{console.log("onWillDismiss called : ",s)})})()}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(x.e),n.Y36(v.x),n.Y36(a.IN),n.Y36(a.Br))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-pending"]],decls:8,vars:3,consts:[["id","main-content",1,"ion-page"],[3,"title"],[4,"ngIf"],["class","spin",4,"ngIf"],[4,"ngFor","ngForOf"],["class","no-po-found",4,"ngIf"],["size","12"],[1,"ion-no-margin"],[1,"left-side-view"],["size","6"],["size","6",1,"right-side-view"],["color","light",1,"badge-detail"],[1,"ion-text-end"],[1,"part_name"],["size","6",1,"ion-align-items-center",2,"display","flex"],[1,"view-btn",3,"click"],["size","small",1,"approve-btn",3,"click"],["size","small",1,"danger","reject-btn",3,"click"],[1,"no-po-found"],[1,"spin"],["name","lines-sharp"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"ion-header"),n._UZ(2,"app-header",1),n.qZA(),n.TgZ(3,"ion-content"),n.YNc(4,T,3,2,"ion-grid",2),n.YNc(5,w,2,0,"ion-grid",3),n.qZA(),n.TgZ(6,"ion-footer"),n._UZ(7,"app-footer"),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("title",t.pageTitle),n.xp6(2),n.Q6J("ngIf",!t.isLoading),n.xp6(1),n.Q6J("ngIf",t.isLoading))},dependencies:[d.sg,d.O5,a.yp,a.YG,a.PM,a.wI,a.W2,a.fr,a.jY,a.Gu,a.Nd,a.PQ,a.yW,A.G,C.c,d.gd],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light)!important}.head-titel[_ngcontent-%COMP%]{font-size:16px}.left-side-view[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}.left-side-view[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-top:6px;margin-bottom:0}.left-side-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-top:0;margin-bottom:0}.left-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]{padding:6px 32px 6px 6px}.left-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)))}.left-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#000}ion-card[_ngcontent-%COMP%]{border:1px solid rgba(102,102,102,.5176470588)}.right-side-view[_ngcontent-%COMP%]{display:flex;justify-content:end}.right-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]{padding:6px}ion-button[_ngcontent-%COMP%]{height:auto}ion-button.approve-btn[_ngcontent-%COMP%]::part(native){padding:10px;border-radius:5px;background-color:var(--ion-color-success);font-size:12px}ion-button.reject-btn[_ngcontent-%COMP%]::part(native){padding:10px;border-radius:5px;background-color:var(--ion-color-danger);font-size:12px}.no-po-found[_ngcontent-%COMP%]{margin:auto;width:50%;padding:10px;text-align:center}.part_name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:140ch}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[P.Bz.forChild(b),P.Bz]}),o})();var U=r(6525);let L=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[d.ez,m.u5,a.Pc,y,U.m]}),o})()}}]);