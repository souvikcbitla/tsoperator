"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5814],{5814:(E,_,s)=>{s.r(_),s.d(_,{PuchaseOrderPageModule:()=>V});var d=s(4755),g=s(5030),r=s(9740),u=s(4053),m=s(5861),c=s(5439),f=s(4117),e=s(3020),P=s(6579),x=s(8506),O=s(3482),M=s(970),C=s(847);const v=["vendorSelectModal"];function D(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",25,26),e.NdJ("ionChange",function(){e.CHM(t);const o=e.MAs(2),a=e.oxw(2);return e.KtG(a.seletedDate(o.value,"start"))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("max",t.maxDate)}}function Z(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-content")(1,"ion-datetime",27,28),e.NdJ("ionChange",function(){e.CHM(t);const o=e.MAs(2),a=e.oxw(2);return e.KtG(a.seletedDate(o.value,"end"))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("min",t.getMinDate(t.startDate))("max",t.maxDate)}}function T(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-auto-complete",29),e.NdJ("selectionChange",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.VendorSelectionChanged(o))})("selectionCancel",function(){e.CHM(t),e.oxw();const o=e.MAs(25);return e.KtG(o.dismiss())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("items",t.vendorsList)("selectedItem",t.vendorName)}}function A(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",30)(2,"ion-card",31)(3,"ion-row",32)(4,"ion-col",30)(5,"ion-row")(6,"ion-col",33)(7,"ion-text")(8,"h6"),e._uU(9),e.ALo(10,"uppercase"),e.qZA()()(),e.TgZ(11,"ion-col",34)(12,"ion-badge",35)(13,"ion-text")(14,"p")(15,"b"),e._uU(16,"Location: "),e.qZA(),e._uU(17),e.qZA()()()()(),e.TgZ(18,"ion-row")(19,"ion-col",33)(20,"ion-text")(21,"p")(22,"b"),e._uU(23,"PO ID: "),e.qZA(),e._uU(24),e.qZA()()(),e.TgZ(25,"ion-col",34)(26,"ion-text",36)(27,"p")(28,"b"),e._uU(29,"Vendor Name: "),e.qZA(),e._uU(30),e.qZA()()()(),e.TgZ(31,"ion-row")(32,"ion-col",33)(33,"ion-text",37)(34,"p")(35,"b"),e._uU(36,"Part Name: "),e.qZA(),e._uU(37),e.qZA()()(),e.TgZ(38,"ion-col",34)(39,"ion-text")(40,"p")(41,"b"),e._uU(42,"Order QTY: "),e.qZA(),e._uU(43),e.qZA()()()(),e.TgZ(44,"ion-row")(45,"ion-col",38)(46,"ion-badge",35)(47,"ion-text")(48,"p"),e._uU(49,"Total Amount: "),e.TgZ(50,"b"),e._uU(51),e.qZA()()()()(),e.TgZ(52,"ion-col",34)(53,"ion-button",39),e.NdJ("click",function(){const a=e.CHM(t).$implicit,h=e.oxw(2);return e.KtG(h.openOrderDetail(a.items))}),e._uU(54,"view"),e.qZA()()(),e.TgZ(55,"ion-row")(56,"ion-col",33)(57,"ion-text")(58,"p")(59,"b"),e._uU(60,"PO Created by: "),e.qZA(),e._uU(61),e.qZA()()(),e.TgZ(62,"ion-col",40)(63,"ion-chip",41),e._uU(64),e.qZA()()()()()()()()}if(2&n){const t=l.$implicit,i=e.oxw(2);e.xp6(9),e.Oqu(e.lcZ(10,11,i.getTimeFormat(t.CREATED_TIME))),e.xp6(8),e.Oqu(t.LOCATION),e.xp6(7),e.Oqu(t.PO_ID),e.xp6(6),e.Oqu(t.VENDOR_NAME),e.xp6(7),e.hij(" ",t.items[0].part_name," "),e.xp6(6),e.AsE("",t.items[0].order_quantity," ",t.items.length>1?i.getQtyStr(t.items.length-1):"",""),e.xp6(8),e.Oqu(t.GRAND_TOTAL),e.xp6(10),e.hij(" ",t.CREATED_BY,""),e.xp6(2),e.Q6J("color","APPROVE"===t.PO_VENDOR_STATUS?"primary":"REJECT"===t.PO_VENDOR_STATUS?"danger":"warning"),e.xp6(1),e.Oqu("APPROVE"===t.PO_VENDOR_STATUS?"APPROVED":"REJECT"===t.PO_VENDOR_STATUS?"REJECTED":"PENDING")}}function w(n,l){1&n&&(e.TgZ(0,"ion-row",42)(1,"ion-col",43),e._uU(2," No Purchase order found! "),e.qZA()())}const p=function(n){return{opacity:n}};function Y(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ion-grid")(1,"ion-row",4)(2,"ion-col",5)(3,"ion-item",6)(4,"ion-input",7),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.startDate=o)}),e.qZA(),e.TgZ(5,"ion-button",8),e._UZ(6,"ion-icon",9),e.qZA(),e.TgZ(7,"ion-modal",10),e.YNc(8,D,3,1,"ng-template"),e.qZA()()(),e.TgZ(9,"ion-col",5)(10,"ion-item",11)(11,"ion-input",12),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.endDate=o)}),e.qZA(),e.TgZ(12,"ion-button",8),e._UZ(13,"ion-icon",9),e.qZA(),e.TgZ(14,"ion-modal",13),e.YNc(15,Z,3,2,"ng-template"),e.qZA()()(),e.TgZ(16,"ion-col",14)(17,"ion-button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFilter("dateRangeFilter"))}),e._UZ(18,"ion-icon",16),e.qZA()()(),e.TgZ(19,"ion-row",17)(20,"ion-col",18)(21,"ion-item",19)(22,"ion-label"),e._uU(23),e.qZA()(),e.TgZ(24,"ion-modal",20,21),e.YNc(26,T,1,2,"ng-template"),e.qZA()(),e.TgZ(27,"ion-col",14)(28,"ion-button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFilter("vendorFiler"))}),e._UZ(29,"ion-icon",16),e.qZA()()(),e.YNc(30,A,65,13,"ion-row",23),e.YNc(31,w,3,0,"ion-row",24),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.startDate),e.xp6(6),e.Q6J("ngStyle",e.VKq(12,p,t.startDate.length?"1":"0.5"))("disabled",!t.startDate.length),e.xp6(1),e.Q6J("ngModel",t.endDate),e.xp6(6),e.Q6J("ngStyle",e.VKq(14,p,t.startDate.length?"1":"0.5"))("disabled",!t.startDate.length),e.xp6(4),e.Q6J("button",!0),e.xp6(2),e.Oqu(t.vendorName&&t.vendorName.length?t.vendorName:"Select Vendor"),e.xp6(5),e.Q6J("ngStyle",e.VKq(16,p,t.vendorName.length?"1":"0.5"))("disabled",!t.vendorName.length),e.xp6(2),e.Q6J("ngForOf",t.purchaseOrderList),e.xp6(1),e.Q6J("ngIf",!t.isLoading&&t.purchaseOrderList&&!t.purchaseOrderList.length)}}function b(n,l){1&n&&(e.TgZ(0,"ion-grid",44),e._UZ(1,"ion-spinner",45),e.qZA())}const L=[{path:"",component:(()=>{class n{constructor(t,i,o){this._poService=t,this._complaintService=i,this.modalCtrl=o,this.isLoading=!1,this.pageTitle="Purchase Order(s)",this.maxDate=c().format("YYYY-MM-DD"),this.startDate="",this.endDate="",this.vendorsList=[],this.selectedVendor="",this.filteredVendorList=[],this.isItemAvailable=!1,this.vendorName=""}ngOnInit(){this.isLoading=!0,this.getPurchaseOrderList(),this.getVendorList()}getVendorList(){this._complaintService.getVendorsList().then(t=>{this.isLoading=!1,t.info&&t.info.length&&(this.vendorsList=t.info)},t=>{this.isLoading=!1,console.log("error : ",t)})}getPurchaseOrderList(){this._poService.getPurchaseOrderList().then(t=>{this.isLoading=!1,t.info&&(console.log("purchaseOrderList.info :: ",t.info),this.purchaseOrderList=t.info,this.masterPOList=t.info)},t=>{this.isLoading=!1,console.log("error : ",t)})}getTimeFormat(t){return c(t).format("DD-MMM-YYYY")}openOrderDetail(t){var i=this;return(0,m.Z)(function*(){const o=yield i.modalCtrl.create({component:f.N,showBackdrop:!1,mode:"ios",initialBreakpoint:1,breakpoints:[0],componentProps:{title:"Purchase Order parts",orderPartsList:t}});o.present(),o.onWillDismiss().then(a=>{console.log("onWillDismiss called : ",a)})})()}getQtyStr(t){return`+${t} more`}seletedDate(t,i){if("start"===i)this.startDate=c(t).format("DD-MM-YY"),this.endDate="";else if(this.endDate=c(t).format("DD-MM-YY"),this.selectedVendor&&this.selectedVendor.length){let o=this.applyDateRangeFilter(this.masterPOList);this.purchaseOrderList=this.applyVendorFilter(o)}else this.purchaseOrderList=this.applyDateRangeFilter(this.masterPOList)}applyDateRangeFilter(t){let i=[];for(let o=0;o<t.length;o++){let a=t[o],h=c(a.CREATED_TIME).format("YYYY-MM-DD");c(h).isBetween(c(this.startDate,"DD-MM-YY").format("YYYY-MM-DD"),c(this.endDate,"DD-MM-YY").format("YYYY-MM-DD"),null,"[]")&&i.push(a)}return i}applyVendorFilter(t){let i=[];for(let o=0;o<t.length;o++){let a=t[o];a.VENDOR_ID===this.selectedVendor&&i.push(a)}return i}removeFilter(t){this.isLoading=!0,this.isItemAvailable=!1,"dateRangeFilter"===t?(this.startDate="",this.endDate="",this.purchaseOrderList=this.selectedVendor.length?this.applyVendorFilter(this.masterPOList):this.masterPOList):"vendorFiler"===t&&(this.selectedVendor="",this.vendorName="",this.purchaseOrderList=this.startDate.length&&this.endDate.length?this.applyDateRangeFilter(this.masterPOList):this.masterPOList),this.isLoading=!1}filterVendors(t){if(this.selectedVendor=t.id,this.vendorName=t.name,this.startDate.length&&this.endDate.length){let i=this.applyDateRangeFilter(this.masterPOList);this.purchaseOrderList=this.applyVendorFilter(i)}else this.purchaseOrderList=this.applyVendorFilter(this.masterPOList)}getItems(t){const i=t.target.value;i&&""!==i.trim()?(this.isItemAvailable=!0,this.filteredVendorList=this.vendorsList.filter(o=>o.name.toLowerCase().indexOf(i.toLowerCase())>-1)):this.filteredVendorList=this.vendorsList}VendorSelectionChanged(t){this.vendorSelectModal.dismiss(),this.filterVendors(t)}searchFocus(t){console.log("searchFocus : ",t),t&&!this.vendorName.length?(this.filteredVendorList=this.vendorsList,this.isItemAvailable=!0):t||(this.isItemAvailable=!1)}getMinDate(t){return c(t,"DD-MM-YY").format("YYYY-MM-DD")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P.x),e.Y36(x.o),e.Y36(r.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-approved-purchases"]],viewQuery:function(t,i){if(1&t&&e.Gf(v,5),2&t){let o;e.iGM(o=e.CRH())&&(i.vendorSelectModal=o.first)}},decls:8,vars:3,consts:[["id","main-content",1,"ion-page"],[3,"title"],[4,"ngIf"],["class","spin",4,"ngIf"],[1,"ion-align-items-center","calendar-date-change"],["size","5",1,"calender-date"],["lines","none","id","open-from-date",1,"custom_date_select"],["placeholder","Start date","readonly","",1,"form-control","forms-text",3,"ngModel","ngModelChange"],["fill","clear"],["color","medium","src","../../../assets/calendar.svg"],["trigger","open-from-date",1,"date_picker"],["lines","none","id","open-to-date",1,"custom_date_select",3,"ngStyle","disabled"],["placeholder","End date","readonly","",1,"form-control","forms-text",3,"ngModel","ngModelChange"],["trigger","open-to-date",1,"date_picker"],["size","2",1,"remove-range-icon","ion-no-padding","ion-align-self-center"],["color","theme","fill","clear",1,"ion-no-margin",3,"ngStyle","disabled","click"],["src","../../../assets/close-circle.svg"],[1,"ion-align-items-center"],["size","10"],["lines","none","id","select-vendor",1,"custom_date_select",3,"button"],["trigger","select-vendor"],["vendorSelectModal",""],["color","theme","fill","clear",3,"ngStyle","disabled","click"],[4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],["showDefaultButtons","true","locale","default","presentation","date","displayFormat","DD-MM-YYYY",3,"max","ionChange"],["startDate",""],["showDefaultButtons","true","locale","default","presentation","date","displayFormat","DD-MM-YYYY",3,"min","max","ionChange"],["endDate",""],["title","Select Vendor","type","vendors",1,"ion-page",3,"items","selectedItem","selectionChange","selectionCancel"],["size","12"],[1,"ion-no-margin"],[1,"left-side-view"],["size","6"],["size","6",1,"right-side-view"],["color","light",1,"badge-detail"],[1,"ion-text-end"],[1,"part_name"],["size","6",1,"ion-align-items-center",2,"display","flex"],[1,"view-btn",3,"click"],["size","6",1,"right-side-view","ion-no-padding"],[1,"po-status","ion-justify-content-center",3,"color"],[1,"ion-text-center"],["size","12",1,"calender-date"],[1,"spin"],["name","lines-sharp"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"ion-header"),e._UZ(2,"app-header",1),e.qZA(),e.TgZ(3,"ion-content"),e.YNc(4,Y,32,18,"ion-grid",2),e.YNc(5,b,2,0,"ion-grid",3),e.qZA(),e.TgZ(6,"ion-footer"),e._UZ(7,"app-footer"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("title",i.pageTitle),e.xp6(2),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[d.sg,d.O5,d.PC,g.JJ,g.On,r.yp,r.YG,r.PM,r.hM,r.wI,r.W2,r.x4,r.fr,r.jY,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.Nd,r.PQ,r.yW,r.ki,r.QI,r.j9,O.G,M.c,C.j,d.gd],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-light)!important}ion-input[_ngcontent-%COMP%]{font-size:12px}@media only screen and (max-width: 365px){ion-input[_ngcontent-%COMP%]{font-size:10px}}ion-datetime[_ngcontent-%COMP%]{padding:16px}.left-side-view[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}.left-side-view[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-top:6px;margin-bottom:0}.left-side-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-top:0;margin-bottom:0}.left-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]{padding:6px 32px 6px 6px}.left-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)))}.left-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#000}ion-card[_ngcontent-%COMP%]{border:1px solid rgba(102,102,102,.5176470588)}.right-side-view[_ngcontent-%COMP%]{display:flex;justify-content:end}.right-side-view[_ngcontent-%COMP%]   .badge-detail[_ngcontent-%COMP%]{padding:6px}.po-status[_ngcontent-%COMP%]{width:72px;height:20px;font-size:12px}ion-button[_ngcontent-%COMP%]{height:auto}.no-po-found[_ngcontent-%COMP%]{margin:auto;width:50%;padding:10px}.part_name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:140ch}ion-modal.date_picker[_ngcontent-%COMP%]{--width: 90%;--max-height: 55vh;--overflow: auto;--border-radius: 8px}ion-modal.date_picker[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{justify-content:center;min-height:100%;max-height:100%;min-width:100%}.custom_date_select[_ngcontent-%COMP%]{border:1px solid rgb(133,133,133);border-radius:10px;--box-shadow: none;--background: transparent;--inner-padding-end: 5px;height:35px;display:flex;font-size:14px;flex-direction:row;flex-wrap:wrap;align-content:center}.calendar-date-change[_ngcontent-%COMP%]   ion-col.calender-date[_ngcontent-%COMP%]{flex:0 0 calc(100% - 80px)!important;width:calc(100% - 80px)!important}.auto-complete-list[_ngcontent-%COMP%]{border:1px solid rgba(102,102,102,.5176470588);border-radius:8px;max-height:150px;position:relative;overflow:hidden;margin-top:3px;overflow-y:auto}.auto-complete-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.auto-complete-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-bottom:1px solid rgba(102,102,102,.5176470588);font-size:14px}  .searchbar-clear-icon.sc-ion-searchbar-ios{width:18px;color:#03a9f3;height:100%}  .select-ltr.select-fill-outline .select-outline-start{border-left:none!important}.select-outline-end[_ngcontent-%COMP%]{border-right:none!important}.remove-range-icon[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}.remove-range-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{border:1px solid rgb(133,133,133);border-radius:5px;padding:3px}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(L),u.Bz]}),n})();var N=s(6525);let V=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,g.u5,r.Pc,y,N.m]}),n})()}}]);